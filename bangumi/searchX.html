<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>SearchX</title>
	<link rel="shortcut icon" href="https://www.musestar.top/ms.ico" type="image/x-icon">
    <script>
        if (window.location.protocol !== 'http:') window.location.protocol = 'http:';
    </script>
    <script>
		console.log('俗手出品');
		function getQueryVariable(variable) {
			let query = window.location.search.substring(1);
			let vars = query.split("&");
			for (let i = 0; i < vars.length; i++) {
				let pair = vars[i].split("=");
				if (pair[0] === variable) {
					return pair[1];
				}
			}
			return false;
		}
		function ulRender(objArr) {
			let theList = document.getElementById('theList');
			for (let oAE of objArr) {
				let liA = document.createElement('li');
				let liS = document.createElement('a');
				let sc = oAE.url.split('/');
				liS.innerHTML = `ID:${sc[sc.length - 2]}`
				liS.href = `playerX.html?idx=${sc[sc.length - 2]}`
				liA.innerHTML = `${oAE.title}`;
				liA.appendChild(liS);
				theList.appendChild(liA);
			}

		}
    </script>
	<style> 
        body {
          background:url("https://dev.iw233.cn/api.php?sort=random")  no-repeat center center;   /*加载背景图*/   /* 背景图不平铺 */
          background-size:cover;  /* 让背景图基于容器大小伸缩 */
          background-attachment:fixed;        /* 当内容高度大于图片高度时，背景图像的位置相对于viewport固定 */    //此条属性必须设置否则可能无效/
          background-color:#CCCCCC;   /* 设置背景颜色，背景图加载过程中会显示背景色 */
        }
       </style>
</head>

<body>
<h1>
    没显示可能是抽风了，请刷新。
</h1>
<h2>当然，不排除没有资源的情况。</h2>
<ul id="theList">

</ul>
<script>
	let tempDo = '';
	let xmlHttpRequest = new XMLHttpRequest();
	xmlHttpRequest.onreadystatechange = function () {
		if (this.status === 200) tempDo = this.responseText;
	};
	xmlHttpRequest.onloadend = function () {
		let parse = JSON.parse(tempDo);
		console.log(parse);
		ulRender(parse);
	};
	xmlHttpRequest.open('GET', `http://119.91.125.201:11334/ssszz.php?top=10&q=${getQueryVariable('s')}`);
	xmlHttpRequest.send();

</script>
</body>
</html>